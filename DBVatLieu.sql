CREATE DATABASE VatLieu
USE VatLieu
CREATE TABLE Account(
Id UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
ChucVu INT NOT NULL,
TrangThai INT NOT NULL,
HoTen NVARCHAR(300) NOT NULL,
NgaySinh DATE NOT NULL,
GioiTinh BIT NOT NULL,
SDT NVARCHAR(12) NOT NULL,
DiaChi NVARCHAR(MAX) NOT NULL,
Email NVARCHAR(300) NOT NULL,
Username NVARCHAR(200) NOT NULL,
[Password] NVARCHAR(200) NOT NULL,
NgayTao DATE NOT NULL,
NguoiTao UNIQUEIDENTIFIER NOT NULL,
NgayChinhSua DATE,
NguoiChinhSua UNIQUEIDENTIFIER
)
CREATE TABLE KhachHang(
Id UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
HoTen NVARCHAR(300) NOT NULL,
NgaySinh DATE NOT NULL,
GioiTinh BIT NOT NULL,
SDT NVARCHAR(12) NOT NULL,
DiaChi NVARCHAR(MAX) NOT NULL,
Email NVARCHAR(300) NOT NULL,
NgayTao DATE NOT NULL,
NguoiTao UNIQUEIDENTIFIER NOT NULL,
NgayChinhSua DATE,
NguoiChinhSua UNIQUEIDENTIFIER
)
CREATE TABLE SanPham(
Id UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
Ma NVARCHAR(20) NOT NULL,
TenSP NVARCHAR(300) NOT NULL,
)
CREATE TABLE Loai(
Id INT IDENTITY(1,1) NOT NULL PRIMARY KEY,
Ma NVARCHAR(20) NOT NULL,
Ten NVARCHAR(300) NOT NULL,
)
CREATE TABLE Hang(
Id INT IDENTITY(1,1) NOT NULL PRIMARY KEY,
Ma NVARCHAR(20) NOT NULL,
Ten NVARCHAR(300) NOT NULL,
)
CREATE TABLE ChiTietSanPham(
Id UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
IdSP UNIQUEIDENTIFIER NOT NULL,
IdHang INT NOT NULL,
IdLoai INT NOT NULL,
DonViTinh NVARCHAR(100) NOT NULL,
SoLuongTon FLOAT NOT NULL,
GiaNhap MONEY NOT NULL,
GiaBan MONEY NOT NULL,
NgayNhap DATE NOT NULL,
NgayChinhSua DATE,
CONSTRAINT FK_IdSP FOREIGN KEY (IdSP) REFERENCES SanPham(Id),
CONSTRAINT FK_IdHang FOREIGN KEY (IdHang) REFERENCES Hang(Id),
CONSTRAINT FK_IdLoaiSP FOREIGN KEY (IdLoai) REFERENCES Loai(Id),
)
CREATE TABLE HoaDon(
Id UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
IdAcc UNIQUEIDENTIFIER NOT NULL,
IdKH UNIQUEIDENTIFIER,
IdTT INT NOT NULL,
Ten NVARCHAR(100) NOT NULL,
NgayTao DATE NOT NULL,
NgayThanhToan DATE,
NgayShip DATE,
NgayKhachNhan DATE,
TongTien MONEY NOT NULL,
NgayChinhSua DATE,
NguoiChinhSua UNIQUEIDENTIFIER
CONSTRAINT FK_IdAcc FOREIGN KEY (IdAcc) REFERENCES Account(Id),
CONSTRAINT FK_IdKH FOREIGN KEY (IdKH) REFERENCES KhachHang(Id)
)
CREATE TABLE HoaDonChiTiet(
IdCTSP UNIQUEIDENTIFIER NOT NULL,
IdHoaDon UNIQUEIDENTIFIER NOT NULL,
TenSP NVARCHAR(300) NOT NULL,
Hang NVARCHAR(300) NOT NULL,
Loai NVARCHAR(300) NOT NULL,
DonViTinh NVARCHAR(200) NOT NULL,
SoLuong FLOAT NOT NULL,
DonGia MONEY NOT NULL
CONSTRAINT PK_IdCTSP_IdHD PRIMARY KEY (IdCTSP,IdHoaDon),
CONSTRAINT FK_IdCTSP FOREIGN KEY (IdCTSP) REFERENCES ChiTietSanPham(Id),
CONSTRAINT FK_IdHD FOREIGN KEY (IdHoaDon) REFERENCES HoaDon(Id)
)
CREATE TABLE GioHang(
Id UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
IdKH UNIQUEIDENTIFIER,
NgayTao DATE NOT NULL,
TongTien MONEY NOT NULL
CONSTRAINT FK_IdGHKH FOREIGN KEY (IdKH) REFERENCES KhachHang(Id),
)
CREATE TABLE GioHangChiTiet(
IdCTSP UNIQUEIDENTIFIER NOT NULL,
IdHoaDon UNIQUEIDENTIFIER NOT NULL,
TenSP NVARCHAR(300) NOT NULL,
Hang NVARCHAR(300) NOT NULL,
Loai NVARCHAR(300) NOT NULL,
DonViTinh NVARCHAR(200) NOT NULL,
SoLuong FLOAT  NOT NULL,
DonGia MONEY NOT NULL
CONSTRAINT PK_IdCTSP_IdGH PRIMARY KEY (IdCTSP,IdHoaDon),
CONSTRAINT FK_IdGHCTSP FOREIGN KEY (IdCTSP) REFERENCES ChiTietSanPham(Id),
CONSTRAINT FK_IdGH FOREIGN KEY (IdHoaDon) REFERENCES HoaDon(Id)
)
INSERT INTO SanPham(Ma,TenSP) VALUES
('SP1','Sat'),
('SP2','Xi'),
('SP3','Gach'),
('SP4','Mat')
INSERT INTO Loai(Ma,Ten) VALUES
('L1','Loai1'),
('L2','Loai2'),
('L3','Loai3'),
('L4','Loai4')
INSERT INTO Hang(Ma,Ten) VALUES
('H1','HangA'),
('H2','HangB'),
('H3','HangC'),
('H4','HangD')
INSERT INTO ChiTietSanPham(IdSP,IdHang,IdLoai,DonViTinh,SoLuongTon,GiaNhap,GiaBan,NgayNhap)
VALUES
('B8307E4F-B626-4144-9D9D-0894D992A894','3',2,'Bao',200,60000,80000,'10/10/2019'),
('24B766CF-5BFC-492A-8A90-3C64379D9465','1',1,'KG',300,15000,19000,'09/06/2018'),
('A310B85C-850B-4F33-AECA-D36734D55846','2',4,'Vien',20000,1000,2500,'03/05/2020')
SELECT * FROM SanPham
SELECT * FROM Hang
SELECT * FROM Loai
SELECT * FROM ChiTietSanPham
INSERT INTO KhachHang(HoTen,NgaySinh,GioiTinh,SDT,DiaChi,Email,NgayTao,NguoiTao)
VALUES ('Ong B','04/01/1999',0,'07124992758','AFASFSAGU','AB.@gmail.com','12/12/2021','A0AE2A09-000E-4E2F-B8F7-87412BFC1B56')
SELECT * FROM Account
SELECT * FROM KhachHang
INSERT INTO HoaDon(IdAcc,IdKH,IdTT,Ten,NgayTao,TongTien) VALUES
('A0AE2A09-000E-4E2F-B8F7-87412BFC1B56','75BF3603-CB06-437F-B927-DA8EECE3EF71',0,'Hoa Don A','11/11/2022',9000000)